# نظام إدارة المصروفات المدرسية

نظام شامل لإدارة الرسوم الدراسية والأقساط للمدارس الخاصة، مطور بتقنيات الويب الحديثة مع دعم كامل للغة العربية.

## 🌟 المميزات الرئيسية

### 🔐 نظام تسجيل الدخول والصلاحيات
- تسجيل دخول آمن للموظفين
- ثلاثة مستويات من الصلاحيات (مدير النظام، محاسب، موظف عادي)
- تحكم في الوصول للميزات حسب الصلاحية
- تسجيل عمليات الدخول والخروج

### 📚 إدارة الطلاب
- تسجيل بيانات الطلاب الكاملة
- نظام ترقيم تلقائي للطلاب
- إدارة بيانات أولياء الأمور
- تصنيف الطلاب حسب الصفوف الدراسية
- البحث والتصفية المتقدمة

### 💰 إدارة الرسوم والأقساط
- تسجيل الرسوم الدراسية لكل طالب
- نظام الأقساط المرن (1-12 قسط)
- إدارة الديون من السنوات السابقة
- حساب المبالغ المستحقة والمتبقية
- تتبع تواريخ استحقاق الأقساط

### 🎯 نظام الخصومات
- خصومات متنوعة (أبناء الموظفين، الطلاب المجتهدين، المنح، الدفع النقدي)
- حساب تلقائي لصافي الرسوم بعد الخصم
- تقارير مفصلة للخصومات الممنوحة

### 🚌 إدارة الباص
- تسجيل اشتراكات الباص الشهرية
- تجديد الاشتراكات بمرونة
- تتبع حالة الاشتراكات (نشط/منتهي)
- تقارير إيرادات النقل المدرسي

### 💳 إدارة المدفوعات
- تسجيل المدفوعات بطرق متعددة (نقدي، بنك، تحويل)
- إصدار سندات استلام تلقائية
- تتبع تاريخ المدفوعات والأرصدة
- طباعة السندات بتصميم احترافي

### 📊 التقارير والإحصائيات
- تقارير شاملة للرسوم الدراسية
- تقارير الأقساط المتأخرة
- تقارير الخصومات الممنوحة
- إحصائيات لوحة التحكم
- إمكانية طباعة وحفظ التقارير كـ PDF

### ⚙️ الإعدادات
- إعدادات بيانات المدرسة
- رفع شعار المدرسة
- تخصيص معلومات الاتصال
- إدارة حسابات المستخدمين

## 🛠️ التقنيات المستخدمة

- **HTML5**: هيكل صفحات الويب
- **CSS3**: التصميم والتنسيق مع دعم RTL
- **JavaScript**: المنطق والتفاعل
- **LocalStorage**: تخزين البيانات محلياً
- **Font Awesome**: الأيقونات
- **Google Fonts**: خط Tajawal العربي
- **العملة**: الريال العُماني (OMR) مع دعم 3 منازل عشرية

## 📋 متطلبات التشغيل

- متصفح ويب حديث (Chrome, Firefox, Safari, Edge)
- JavaScript مُفعّل
- لا يتطلب خادم ويب أو قاعدة بيانات خارجية

## 🚀 كيفية التشغيل

1. قم بتحميل جميع الملفات إلى مجلد واحد
2. افتح ملف `index.html` في متصفح الويب
3. سجل الدخول باستخدام إحدى الحسابات التجريبية:
   - **مدير النظام**: admin / admin123
   - **محاسب**: accountant / acc123  
   - **موظف**: user / user123
4. ابدأ في استخدام النظام فوراً

## 📁 هيكل الملفات

```
school-fees-management/
├── index.html          # الصفحة الرئيسية
├── styles.css          # ملف التنسيق والتصميم
├── app.js             # المنطق الرئيسي للتطبيق
├── database.js        # إدارة قاعدة البيانات المحلية
└── README.md          # هذا الملف
```

## 📖 دليل الاستخدام

### إضافة طالب جديد

1. انتقل إلى قسم "إدارة الطلاب"
2. اضغط على "إضافة طالب جديد"
3. املأ جميع البيانات المطلوبة:
   - البيانات الأساسية (الاسم، الصف، العام الدراسي)
   - بيانات ولي الأمر والاتصال
   - الرسوم الدراسية وطريقة الدفع
   - عدد الأقساط وتاريخ الاستحقاق
   - الخصومات (إن وجدت)
   - اشتراك الباص
4. اضغط "إضافة الطالب"

### سداد قسط

1. من جدول الطلاب، اضغط على أيقونة 💰 للطالب المطلوب
2. أدخل المبلغ المسدد
3. اختر طريقة الدفع
4. أضف ملاحظات إضافية (اختياري)
5. اضغط "تأكيد السداد"
6. سيتم إنشاء وطباعة سند الاستلام تلقائياً

### عرض تفاصيل الطالب

1. اضغط على أيقونة 👁️ من جدول الطلاب
2. ستظهر نافذة تحتوي على:
   - البيانات الأساسية للطالب
   - ملخص الرسوم والأقساط
   - سجل المدفوعات التفصيلي

### إنشاء التقارير

1. انتقل إلى قسم "التقارير"
2. اختر نوع التقرير المطلوب:
   - تقرير الرسوم المدرسية
   - تقرير الأقساط المتأخرة
   - تقرير الخصومات
3. اضغط "إنشاء التقرير"
4. سيفتح التقرير في نافذة جديدة جاهز للطباعة

### البحث والتصفية

- **البحث النصي**: أدخل اسم الطالب أو رقم الهاتف أو اسم ولي الأمر
- **التصفية بالصف**: اختر صف دراسي محدد من القائمة المنسدلة
- **دمج البحث والتصفية**: يمكن استخدامهما معاً للحصول على نتائج دقيقة

### إدارة الصلاحيات

#### مدير النظام:
- جميع الصلاحيات الكاملة
- إضافة وتعديل وحذف الطلاب
- إدارة الباص والإعدادات
- الوصول لجميع التقارير

#### المحاسب:
- عرض وإضافة وتعديل الطلاب
- إدارة المدفوعات والرسوم
- الوصول للتقارير المالية
- لا يمكن حذف البيانات

#### الموظف العادي:
- عرض بيانات الطلاب
- إضافة طلاب جدد فقط
- لا يمكن التعديل أو الحذف
- وصول محدود للتقارير

### استيراد وتصدير البيانات بصيغة Excel

#### تحميل نموذج Excel:
1. اضغط على "تحميل نموذج Excel" في قسم إدارة الطلاب
2. سيتم تحميل ملف Excel يحتوي على:
   - صفحة "بيانات الطلاب" مع العناوين وأمثلة (مُبسطة)
   - صفحة "التعليمات" مع شرح مفصل لكيفية التعبئة
3. احذف الصفوف المثالية قبل تعبئة البيانات الحقيقية

**ملاحظة:** تم تبسيط النموذج بحذف حقول: اسم ولي الأمر، البريد الإلكتروني، وصلة ولي الأمر

#### الاستيراد من Excel:
1. اضغط على "استيراد من Excel"
2. اختر ملف Excel (.xlsx أو .xls) معبأ بالبيانات
3. سيتم استيراد البيانات تلقائياً مع عرض تقرير النتائج
4. يتم التحقق من صحة البيانات أثناء الاستيراد

#### التصدير إلى Excel:
1. اضغط على "تصدير إلى Excel"
2. سيتم إنشاء ملف Excel يحتوي على:
   - صفحة "بيانات الطلاب" بجميع التفاصيل المالية
   - صفحة "الإحصائيات" بملخص شامل للنظام
3. يشمل التصدير: البيانات الشخصية، الرسوم، المدفوعات، الأرصدة

## 🎨 التخصيص

### تغيير بيانات المدرسة

1. انتقل إلى قسم "الإعدادات"
2. أدخل بيانات المدرسة الجديدة
3. ارفع شعار المدرسة (اختياري)
4. اضغط "حفظ الإعدادات"

### تخصيص التصميم

يمكن تعديل ملف `styles.css` لتخصيص الألوان والخطوط:

```css
/* تغيير اللون الأساسي */
:root {
    --primary-color: #4c51bf;
    --secondary-color: #667eea;
}

/* تغيير الخط */
body {
    font-family: 'Tajawal', 'Cairo', Arial, sans-serif;
}
```

## 🔒 الأمان والبيانات

- البيانات محفوظة محلياً في متصفح المستخدم
- لا يتم إرسال أي بيانات لخوادم خارجية
- يُنصح بأخذ نسخ احتياطية دورية باستخدام ميزة التصدير
- تأكد من عدم مشاركة الجهاز مع أشخاص غير مخولين

## ⚠️ ملاحظات مهمة

### النسخ الاحتياطية
- البيانات محفوظة في `localStorage` للمتصفح
- يُنصح بأخذ نسخة احتياطية بانتظام
- في حالة تنظيف بيانات المتصفح، ستفقد جميع البيانات

### الطباعة
- تأكد من ضبط إعدادات الطباعة على:
  - اتجاه: Portrait (عمودي)
  - حجم الورق: A4
  - الهوامش: عادية

### الأداء
- النظام محسّن للعمل مع آلاف السجلات
- في حالة بطء الأداء، تأكد من تحديث المتصفح

## 🆘 استكشاف الأخطاء

### المشاكل الشائعة وحلولها

**المشكلة**: لا تظهر البيانات بعد إضافة طالب
**الحل**: تأكد من تعبئة جميع الحقول المطلوبة وإعادة تحميل الصفحة

**المشكلة**: خطأ في طباعة السندات
**الحل**: تأكد من السماح للمتصفح بفتح النوافذ المنبثقة

**المشكلة**: اختفاء البيانات
**الحل**: تحقق من عدم تنظيف بيانات المتصفح، استعد من النسخة الاحتياطية

**المشكلة**: النص لا يظهر بالعربية بشكل صحيح
**الحل**: تأكد من تحديث المتصفح ودعمه للخط العربي

## 📞 الدعم الفني

في حالة واجهت أي مشاكل أو لديك اقتراحات للتطوير:

1. تحقق من وحدة تحكم المتصفح (F12) لرسائل الخطأ
2. تأكد من إتباع التعليمات بدقة
3. راجع هذا الدليل للحصول على المساعدة

## 🔄 التحديثات المستقبلية

### المميزات المحدثة:
- [x] نظام تسجيل الدخول للموظفين
- [x] إدارة اشتراكات الباص مع إصدار سندات
- [x] تصدير التقارير والبيانات إلى Excel
- [x] معاينة السندات وإشعارات المطالبة قبل الطباعة
- [x] دعم رفع وعرض شعار المدرسة في السندات
- [x] نظام تصفية وبحث متقدم في التقارير
- [x] تاريخ بصيغة ميلادية (جريجورية) بدلاً من الهجرية

### المميزات المخطط إضافتها:
- [ ] إشعارات تلقائية للأقساط المستحقة
- [ ] نظام النسخ الاحتياطي التلقائي
- [ ] واجهة للهواتف المحمولة
- [ ] دعم أكثر من مدرسة في نفس النظام
- [ ] إحصائيات مالية متقدمة
- [ ] نظام إدارة المصروفات الإضافية

## 📄 الترخيص

هذا النظام مطور لأغراض تعليمية وتجارية. يمكن استخدامه وتعديله بحرية مع ذكر المصدر.

---

## 🎯 الخلاصة

نظام إدارة المصروفات المدرسية هو حل شامل ومتكامل لإدارة الرسوم الدراسية في المدارس الخاصة. يوفر واجهة سهلة الاستخدام مع دعم كامل للغة العربية، ونظام تقارير متطور، وإمكانيات إدارة متقدمة للطلاب والأقساط.

النظام مصمم ليكون بسيط التشغيل، لا يتطلب خبرة تقنية معقدة، ويمكن استخدامه فور تحميله على أي جهاز كمبيوتر.

**تم التطوير بـ ❤️ لخدمة التعليم العربي**
