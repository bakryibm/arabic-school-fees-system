<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุฎุชุจุงุฑ ุดุงูู ูููุธุงู</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div style="padding: 20px;">
        <h1>ุงุฎุชุจุงุฑ ุดุงูู ููุธุงู ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช ุงููุฏุฑุณูุฉ</h1>
        
        <div class="test-section" style="margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px;">
            <h2>1. ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู ูุงูุฃุฒุฑุงุฑ ุงูุฃุณุงุณูุฉ</h2>
            <button class="btn btn-primary" onclick="autoLogin()">ุชุณุฌูู ุฏุฎูู ุชููุงุฆู</button>
            <button class="btn btn-success" onclick="testAddStudent()">ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ุทุงูุจ</button>
            <button class="btn btn-warning" onclick="testEditStudent()">ุงุฎุชุจุงุฑ ุชุนุฏูู ุทุงูุจ</button>
            <button class="btn btn-info" onclick="testManageStudent()">ุงุฎุชุจุงุฑ ุฅุฏุงุฑุฉ ุทุงูุจ</button>
            <button class="btn btn-danger" onclick="testDeleteStudent()">ุงุฎุชุจุงุฑ ุญุฐู ุทุงูุจ</button>
        </div>
        
        <div class="test-section" style="margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px;">
            <h2>2. ุงุฎุชุจุงุฑ ูุธุงุฆู ุงูุทุจุงุนุฉ ูุงูุฏูุน</h2>
            <button class="btn btn-secondary" onclick="testPrint()">ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ</button>
            <button class="btn btn-primary" onclick="testPayment()">ุงุฎุชุจุงุฑ ุงูุฏูุน</button>
            <button class="btn btn-info" onclick="testProgress()">ุงุฎุชุจุงุฑ ูุคุดุฑ ุงูุชูุฏู</button>
        </div>
        
        <div class="test-section" style="margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px;">
            <h2>3. ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ</h2>
            <div id="test-results" style="min-height: 200px; background: #f8f9fa; padding: 15px; border-radius: 5px;">
                ุฌุงุฑู ุชุญุถูุฑ ุงูุงุฎุชุจุงุฑุงุช...
            </div>
        </div>
        
        <!-- ุงูููุงูุฐ ุงูููุจุซูุฉ ุงููุทููุจุฉ -->
        <div id="alert-overlay" class="alert-overlay">
            <div class="alert-box">
                <div class="alert-icon">
                    <i id="alert-icon" class="fas fa-info-circle"></i>
                </div>
                <div class="alert-content">
                    <p id="alert-message"></p>
                </div>
                <div class="alert-actions">
                    <button class="btn btn-primary" onclick="closeAlert()">ุญุณูุงู</button>
                </div>
            </div>
        </div>
        
        <div id="add-student-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</h2>
                    <span class="close" onclick="closeModal('add-student-modal')">&times;</span>
                </div>
                <div class="modal-body">
                    <p>ูุงูุฐุฉ ุฅุถุงูุฉ ุทุงูุจ ุชุนูู ุจูุฌุงุญ!</p>
                </div>
            </div>
        </div>
        
        <div id="edit-student-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ุชุนุฏูู ุจูุงูุงุช ุงูุทุงูุจ</h2>
                    <span class="close" onclick="closeModal('edit-student-modal')">&times;</span>
                </div>
                <div class="modal-body">
                    <p>ูุงูุฐุฉ ุชุนุฏูู ุงูุทุงูุจ ุชุนูู ุจูุฌุงุญ!</p>
                </div>
            </div>
        </div>
        
        <div id="manage-student-modal" class="modal">
            <div class="modal-content large-modal">
                <span class="close">&times;</span>
                <div class="modal-header">
                    <h2>ุฅุฏุงุฑุฉ ุงูุทุงูุจ</h2>
                    <div class="student-info-summary">
                        <div class="info-card">
                            <i class="fas fa-user"></i>
                            <span id="manage-student-name">ุทุงูุจ ุงุฎุชุจุงุฑ</span>
                        </div>
                        <div class="info-card">
                            <i class="fas fa-graduation-cap"></i>
                            <span id="manage-student-grade">ุงูุตู ุงูุฃูู</span>
                        </div>
                        <div class="info-card">
                            <i class="fas fa-money-bill"></i>
                            <span id="manage-total-fees">500.000 ุฑ.ุน</span>
                        </div>
                    </div>
                </div>
                
                <div class="manage-tabs">
                    <button class="tab-btn active" onclick="showManageTab('payments', this)">ุงูุฃูุณุงุท ูุงููุฏููุนุงุช</button>
                    <button class="tab-btn" onclick="showManageTab('history', this)">ุชุงุฑูุฎ ุงูุฅุฌุฑุงุกุงุช</button>
                    <button class="tab-btn" onclick="showManageTab('summary', this)">ููุฎุต ุงูุญุณุงุจ</button>
                </div>
                
                <div id="payments-tab" class="tab-content active">
                    <div class="payments-section">
                        <h3>ุงูุฃูุณุงุท ุงููุณุชุญูุฉ</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ุฑูู ุงููุณุท</th>
                                        <th>ุชุงุฑูุฎ ุงูุงุณุชุญูุงู</th>
                                        <th>ุงููุจูุบ</th>
                                        <th>ุงูุญุงูุฉ</th>
                                        <th>ุงูุฅุฌุฑุงุกุงุช</th>
                                    </tr>
                                </thead>
                                <tbody id="installments-tbody">
                                    <tr>
                                        <td>1</td>
                                        <td>2024-01-01</td>
                                        <td>250.000 ุฑ.ุน</td>
                                        <td><span class="status paid">ูุฏููุน</span></td>
                                        <td><button class="btn btn-sm btn-secondary">ุทุจุงุนุฉ</button></td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>2024-02-01</td>
                                        <td>250.000 ุฑ.ุน</td>
                                        <td><span class="status pending">ูุณุชุญู</span></td>
                                        <td><button class="btn btn-sm btn-primary">ุฏูุน</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="history-tab" class="tab-content">
                    <div class="history-section">
                        <h3>ุณุฌู ุงูุนูููุงุช</h3>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ุงูุชุงุฑูุฎ</th>
                                        <th>ููุน ุงูุฅุฌุฑุงุก</th>
                                        <th>ุงูุชูุงุตูู</th>
                                        <th>ุงููุณุชุฎุฏู</th>
                                    </tr>
                                </thead>
                                <tbody id="history-tbody">
                                    <tr>
                                        <td>2024-01-15</td>
                                        <td>ุฅุถุงูุฉ ุทุงูุจ</td>
                                        <td>ุชู ุฅุถุงูุฉ ุงูุทุงูุจ ุฅูู ุงููุธุงู</td>
                                        <td>ูุฏูุฑ ุงููุธุงู</td>
                                    </tr>
                                    <tr>
                                        <td>2024-01-20</td>
                                        <td>ุฏูุน ูุณุท</td>
                                        <td>ุชู ุฏูุน ุงููุณุท ุงูุฃูู ุจูุจูุบ 250.000 ุฑ.ุน</td>
                                        <td>ุงููุญุงุณุจ</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="summary-tab" class="tab-content">
                    <div class="summary-cards">
                        <div class="summary-card">
                            <div class="card-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="card-content">
                                <h4>ุฅุฌูุงูู ุงูุฑุณูู</h4>
                                <span id="summary-total-fees" class="amount">500.000 ุฑ.ุน</span>
                            </div>
                        </div>
                        
                        <div class="summary-card paid">
                            <div class="card-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="card-content">
                                <h4>ุงููุจูุบ ุงููุณุฏุฏ</h4>
                                <span id="summary-paid-amount" class="amount">250.000 ุฑ.ุน</span>
                            </div>
                        </div>
                        
                        <div class="summary-card pending">
                            <div class="card-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="card-content">
                                <h4>ุงููุจูุบ ุงููุชุจูู</h4>
                                <span id="summary-remaining-amount" class="amount">250.000 ุฑ.ุน</span>
                            </div>
                        </div>
                        
                        <div class="summary-card overdue">
                            <div class="card-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="card-content">
                                <h4>ุงููุชุฃุฎุฑุงุช</h4>
                                <span id="summary-overdue-amount" class="amount">0.000 ุฑ.ุน</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="progress-section">
                        <h3>ุชูุฏู ุงูุณุฏุงุฏ</h3>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div id="payment-progress" class="progress-fill" style="width: 50%; background-color: #ed8936;"></div>
                            </div>
                            <span id="payment-percentage" class="progress-text">50%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="database.js"></script>
    <script src="app.js"></script>
    
    <script>
        let testResults = [];
        
        function autoLogin() {
            const adminUser = {
                id: 1,
                username: 'admin',
                role: 'admin',
                name: 'ูุฏูุฑ ุงููุธุงู'
            };
            
            localStorage.setItem('logged_in_user', JSON.stringify(adminUser));
            addTestResult('โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุงูุชููุงุฆู ุจูุฌุงุญ', 'success');
        }
        
        function testAddStudent() {
            try {
                showAddStudentModal();
                addTestResult('โ ูุงูุฐุฉ ุฅุถุงูุฉ ุทุงูุจ ุชุนูู ุจูุฌุงุญ', 'success');
                setTimeout(() => closeModal('add-student-modal'), 2000);
            } catch (error) {
                addTestResult('โ ุฎุทุฃ ูู ูุงูุฐุฉ ุฅุถุงูุฉ ุงูุทุงูุจ: ' + error.message, 'error');
            }
        }
        
        function testEditStudent() {
            try {
                // ูุญุงููุฉ ูุชุญ ูุงูุฐุฉ ุชุนุฏูู ุจุทุงูุจ ุงูุชุฑุงุถู
                document.getElementById('edit-student-modal').style.display = 'block';
                addTestResult('โ ูุงูุฐุฉ ุชุนุฏูู ุงูุทุงูุจ ุชุนูู ุจูุฌุงุญ', 'success');
                setTimeout(() => closeModal('edit-student-modal'), 2000);
            } catch (error) {
                addTestResult('โ ุฎุทุฃ ูู ูุงูุฐุฉ ุชุนุฏูู ุงูุทุงูุจ: ' + error.message, 'error');
            }
        }
        
        function testManageStudent() {
            try {
                document.getElementById('manage-student-modal').style.display = 'block';
                addTestResult('โ ูุงูุฐุฉ ุฅุฏุงุฑุฉ ุงูุทุงูุจ ุชุนูู ุจูุฌุงุญ', 'success');
                setTimeout(() => document.getElementById('manage-student-modal').style.display = 'none', 3000);
            } catch (error) {
                addTestResult('โ ุฎุทุฃ ูู ูุงูุฐุฉ ุฅุฏุงุฑุฉ ุงูุทุงูุจ: ' + error.message, 'error');
            }
        }
        
        function testDeleteStudent() {
            try {
                if (typeof deleteStudent === 'function') {
                    addTestResult('โ ุฏุงูุฉ ุญุฐู ุงูุทุงูุจ ููุฌูุฏุฉ', 'success');
                } else {
                    addTestResult('โ ุฏุงูุฉ ุญุฐู ุงูุทุงูุจ ุบูุฑ ููุฌูุฏุฉ', 'error');
                }
            } catch (error) {
                addTestResult('โ ุฎุทุฃ ูู ุงุฎุชุจุงุฑ ุญุฐู ุงูุทุงูุจ: ' + error.message, 'error');
            }
        }
        
        function testPrint() {
            try {
                if (typeof printReceipt === 'function') {
                    addTestResult('โ ุฏุงูุฉ ุงูุทุจุงุนุฉ ููุฌูุฏุฉ ูุฌุงูุฒุฉ', 'success');
                } else {
                    addTestResult('โ ุฏุงูุฉ ุงูุทุจุงุนุฉ ุบูุฑ ููุฌูุฏุฉ', 'error');
                }
            } catch (error) {
                addTestResult('โ ุฎุทุฃ ูู ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ: ' + error.message, 'error');
            }
        }
        
        function testPayment() {
            try {
                if (typeof payInstallment === 'function') {
                    addTestResult('โ ุฏุงูุฉ ุงูุฏูุน ููุฌูุฏุฉ ูุฌุงูุฒุฉ', 'success');
                } else {
                    addTestResult('โ ุฏุงูุฉ ุงูุฏูุน ุบูุฑ ููุฌูุฏุฉ', 'error');
                }
            } catch (error) {
                addTestResult('โ ุฎุทุฃ ูู ุงุฎุชุจุงุฑ ุงูุฏูุน: ' + error.message, 'error');
            }
        }
        
        function testProgress() {
            try {
                const progressBar = document.getElementById('payment-progress');
                if (progressBar) {
                    progressBar.style.width = '75%';
                    progressBar.style.backgroundColor = '#38a169';
                    document.getElementById('payment-percentage').textContent = '75%';
                    addTestResult('โ ูุคุดุฑ ุชูุฏู ุงูุณุฏุงุฏ ูุนูู ุจูุฌุงุญ', 'success');
                } else {
                    addTestResult('โ ูุคุดุฑ ุชูุฏู ุงูุณุฏุงุฏ ุบูุฑ ููุฌูุฏ', 'error');
                }
            } catch (error) {
                addTestResult('โ ุฎุทุฃ ูู ูุคุดุฑ ุงูุชูุฏู: ' + error.message, 'error');
            }
        }
        
        function addTestResult(message, type) {
            const color = type === 'success' ? 'green' : 'red';
            testResults.push(`<div style="color: ${color}; margin: 5px 0;">${message}</div>`);
            document.getElementById('test-results').innerHTML = testResults.join('');
        }
        
        // ุงุฎุชุจุงุฑ ุชููุงุฆู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                addTestResult('๐ ุจุฏุก ุงูุงุฎุชุจุงุฑุงุช ุงูุชููุงุฆูุฉ...', 'info');
                
                // ูุญุต ุงูุฏูุงู ุงูุฃุณุงุณูุฉ
                const functions = [
                    'showSection', 'showAddStudentModal', 'editStudent', 'manageStudent', 
                    'deleteStudent', 'printReceipt', 'payInstallment', 'showAlert', 
                    'closeAlert', 'showManageTab'
                ];
                
                functions.forEach(func => {
                    if (typeof window[func] === 'function') {
                        addTestResult(`โ ${func} ููุฌูุฏุฉ`, 'success');
                    } else {
                        addTestResult(`โ ${func} ุบูุฑ ููุฌูุฏุฉ`, 'error');
                    }
                });
                
                // ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
                if (typeof db === 'object') {
                    addTestResult('โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตูุฉ', 'success');
                } else {
                    addTestResult('โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ูุชุตูุฉ', 'error');
                }
                
                addTestResult('โ ุงูุชูุงุก ุงูุงุฎุชุจุงุฑุงุช ุงูุชููุงุฆูุฉ', 'info');
            }, 1000);
        });
    </script>
</body>
</html>
